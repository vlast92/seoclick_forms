{"version":3,"sources":["../../sources/js/seoclick_forms.js"],"names":["jQuery","document","ready","$","inputs","sitePattern","phonePattern","emailPattern","forms","default_site_tooltip_text","default_email_tooltip_text","default_phone_tooltip_text","each","index","form","find","setEvents","on","sendData","checkInputPatterns","input","def_pattern","def_tooltip_text","pattern","attr","tooltip","data","response","undefined","command","after","next","hide","show","animate","opacity","input_obj","data_type","validation","checkPasteText","checkPressedKey","check","checkPattern","val","removeClass","event","originalEvent","clipboardData","getData","getPattern","test","preventDefault","e","ctrlKey","altKey","metaKey","chr","getChar","code","which","keyCode","String","fromCharCode","charCode","inputData","value","RegExp","addClass","capchaResponse","request","formContainer","closest","messageBox","serializeArray","objectifyFormData","hasClass","scrollTop","offset","top","html","ajax","type","success","respond","error","jqXHR","textStatus","grecaptcha","reset","formArray","returnArray","i","length"],"mappings":"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","file":"seoclick_forms.js","sourcesContent":["jQuery(document).ready(function ($) {\r\n\r\n    let inputs,\r\n        sitePattern = \"^[\\\\w \\\\.]+[\\\\.]{1}[\\\\D]{2,4}$\",\r\n        phonePattern = \"^[\\\\d \\\\+]{1,5}[\\\\( \\\\d \\\\) \\\\s]{1,10}[-?\\\\d \\\\s]+$\",\r\n        emailPattern = \"^[\\\\w \\\\.]+[@]{1}[\\\\w]+[\\\\.]{1}[\\\\D]{2,4}$\",\r\n        forms = $(\".form-validate\"),\r\n        default_site_tooltip_text = \"Адрес должен быть в формате site.domain\",\r\n        default_email_tooltip_text = \"Email должен быть в формате mailbox@mail.domain\",\r\n        default_phone_tooltip_text = \"Телефон должен быть в формате +код страны(код оператора)номер телефона. Например +375(33)123-45-67\";\r\n\r\n    $.each(forms, function (index, form) {\r\n\r\n        //получаем валиируемые поля формы\r\n        inputs = $(form).find(\".validate\");\r\n\r\n        //вызываем функцию установки обработчиков на поля формы\r\n        setEvents(inputs);\r\n        //вешам обработчик отправки формы\r\n        $(form).on(\"submit\", sendData);\r\n    });\r\n\r\n    /*\r\n    * Функция проверяет атрибуты pattern и data-tooltip\r\n    * и в случае их отсутсвия присваивает им значения\r\n    * по умолчанию при их наличии и возвращает true\r\n    * иначе false\r\n    * */\r\n    function checkInputPatterns(input, def_pattern, def_tooltip_text) {\r\n\r\n        let pattern = input.attr(\"pattern\"),\r\n            tooltip = input.data(\"tooltip\"),\r\n            response = {pattern: false, tooltip: false};\r\n\r\n        if (pattern === undefined) {\r\n            if (def_pattern !== undefined) {\r\n                input.attr(\"pattern\", def_pattern);\r\n                response.pattern = true;\r\n            } else {\r\n                response.pattern = false;\r\n            }\r\n        } else {\r\n            response.pattern = true;\r\n        }\r\n\r\n        if (tooltip === undefined) {\r\n            if (def_tooltip_text !== undefined) {\r\n                input.data(\"tooltip\", def_tooltip_text);\r\n                response.tooltip = true;\r\n            } else {\r\n                response.tooltip = false;\r\n            }\r\n        } else {\r\n            response.tooltip = true;\r\n        }\r\n\r\n        return response;\r\n    }\r\n\r\n    /*\r\n    * Функция управления подсказками\r\n    * */\r\n    function tooltip(input, command) {\r\n\r\n        switch (command) {\r\n            case 'create':\r\n                input.after(\"<div class='invalid-tooltip'><div>\" + input.data(\"tooltip\") + \"</div></div>\");\r\n                input.next().hide();\r\n                break;\r\n            case 'show':\r\n                input.next().show();\r\n                input.next().animate({\r\n                    opacity: 1\r\n                }, 300, () => {\r\n                    input.next().show();\r\n                });\r\n                break;\r\n            case 'hide':\r\n                input.next().animate({\r\n                    opacity: 0\r\n                }, 300, () => {\r\n                    input.next().hide();\r\n                });\r\n                break;\r\n        }\r\n    }\r\n\r\n    //функция установки обработчиков полей формы\r\n    function setEvents(inputs) {\r\n\r\n        $.each(inputs, function (index, input) {\r\n\r\n            let input_obj = $(input),\r\n                data_type = input_obj.attr(\"data-validate\"),\r\n                validation;\r\n\r\n            //устанавливвваем шаблоны для полей формы\r\n            switch (data_type) {\r\n                case \"site\":\r\n                    validation = checkInputPatterns(input_obj, sitePattern, default_site_tooltip_text);\r\n                    break;\r\n                case \"email\":\r\n                    validation = checkInputPatterns(input_obj, emailPattern, default_email_tooltip_text);\r\n                    break;\r\n                case \"phone\":\r\n                    validation = checkInputPatterns(input_obj, phonePattern, default_phone_tooltip_text);\r\n                    input_obj.on(\"paste\", checkPasteText);\r\n                    input_obj.on(\"keypress\", checkPressedKey);\r\n                    break;\r\n                default:\r\n                    validation = checkInputPatterns(input_obj);\r\n                    if (!validation.tooltip && !validation.pattern) return true;\r\n            }\r\n            if (validation.tooltip) {\r\n                tooltip(input_obj, 'create');\r\n                input_obj.on(\"mouseenter\", function () {\r\n                    tooltip(input_obj, 'show');\r\n                });\r\n                input_obj.on(\"focusout mouseleave\", function () {\r\n\r\n                    tooltip(input_obj, 'hide');\r\n                });\r\n            }\r\n            //устанавливаем обработчик на проверку вводимых данных\r\n            if (validation.pattern) {\r\n                input_obj.on(\"change keyup\", function () {\r\n\r\n                    let check = checkPattern($(this));\r\n\r\n                    if (validation.tooltip) {\r\n                        if (!check) {\r\n                            tooltip(input_obj, 'show');\r\n                        } else {\r\n                            tooltip(input_obj, 'hide');\r\n                        }\r\n                    }\r\n                });\r\n                input_obj.on(\"focusout mouseleave\", function () {\r\n\r\n                    if (input_obj.val() === '') {\r\n                        input_obj.removeClass('invalid');\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    //функция проверки вставленные данные в поле формы по шаблону\r\n    function checkPasteText(event) {\r\n        let pattern,\r\n            data = event.originalEvent.clipboardData.getData('text/plain');\r\n\r\n        pattern = getPattern($(this));\r\n\r\n        //проверка данных по шаблону\r\n        if (!pattern.test(data)) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    /*\r\n    * функция проверки нажатой клавиши\r\n    * Функция возвращет false на все клавиши,\r\n    * кроме цифр, знаков + - ( ) и пробелов\r\n    */\r\n    function checkPressedKey(event) {\r\n\r\n        let e = event;\r\n\r\n        if (e.ctrlKey || e.altKey || e.metaKey) {\r\n            return;\r\n        }\r\n\r\n        let chr = getChar(e);\r\n\r\n        // с null надо осторожно в неравенствах, т.к. например null >= '0' => true!\r\n        // на всякий случай лучше вынести проверку chr = null отдельно\r\n        if (chr === null) {\r\n            return;\r\n        }\r\n\r\n        if (chr < '0' || chr > '9') {\r\n            if (chr !== \"+\" && chr !== \"-\" && chr !== \"(\" && chr !== \")\" && chr !== \" \") {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    //функция возвращает код символа\r\n    function getChar(event) {\r\n\r\n        if (event.code === \"Space\" || event.code === \"Equal\" || event.code === \"Digit9\" || event.code === \"Digit0\") {\r\n            return 0;\r\n        }\r\n        if (event.which === null) { // IE\r\n            if (event.keyCode < 32) return null; // спец. символ\r\n            return String.fromCharCode(event.keyCode)\r\n        }\r\n\r\n        if (event.which !== 0 && event.charCode !== 0) { // все кроме IE\r\n            if (event.which < 32) return null; // спец. символ\r\n            return String.fromCharCode(event.which); // остальные\r\n        }\r\n\r\n        return null; // спец. символ\r\n    }\r\n\r\n    /*\r\n    * Функция проверки введенных данных по шаблону\r\n    * возвращает false если проверка не пройдена\r\n    */\r\n    function checkPattern(inputData) {\r\n\r\n        let value = inputData.val(), pattern;\r\n\r\n        pattern = new RegExp(inputData.attr(\"pattern\"));\r\n\r\n        //проверка данных по шаблону\r\n        if (!pattern.test(value)) {\r\n            inputData.addClass(\"invalid\");\r\n            return false;\r\n        } else {\r\n            inputData.removeClass(\"invalid\");\r\n            return true;\r\n        }\r\n    }\r\n\r\n    //функция отправки данных на сервер\r\n    function sendData(event) {\r\n\r\n        event.preventDefault();\r\n\r\n        let form = $(this), capchaResponse, request, data,\r\n            formContainer = form.closest(\".seoclick-forms\"),\r\n            messageBox = formContainer.find(\".message-container\");\r\n\r\n        data = form.serializeArray();\r\n        data = objectifyFormData(data);\r\n\r\n        messageBox.addClass(\"active\");\r\n        if ($(formContainer).hasClass(\"seoclick-forms-popup-wrap\")) {\r\n            $(formContainer).find(\".container\").animate({\r\n                scrollTop: 0\r\n            }, 300);\r\n        } else {\r\n            $('html, body').animate({\r\n                scrollTop: formContainer.offset().top - 200\r\n            }, 300);\r\n        }\r\n\r\n        capchaResponse = form.find(\".g-recaptcha-response\").val();\r\n        if (capchaResponse === \"\") {\r\n            messageBox.html(\"Не пройдена проверка 'Я не робот'\");\r\n            return false;\r\n        }\r\n\r\n        messageBox.html(\"Отправка...\");\r\n        // Формируем параметры запроса\r\n        request = {\r\n            'option': 'com_ajax', // Используем AJAX интерфейс\r\n            'module': 'seoclick_forms', // Название модуля без mod_\r\n            'format': 'json', // Формат возвращаемых данных\r\n            'g-recaptcha-response': capchaResponse, //ответ капчи\r\n            'data': data // данные формы\r\n        };\r\n\r\n        $.ajax({\r\n            type: 'POST',\r\n            data: request,\r\n\r\n            success: function (respond) {\r\n\r\n                messageBox.html(respond.data);\r\n            },\r\n            error: function (jqXHR, textStatus) {\r\n                messageBox.html('Ошибка AJAX запроса: ' + textStatus);\r\n            }\r\n        });\r\n\r\n        grecaptcha.reset();\r\n        return true;\r\n    }\r\n\r\n    /*\r\n    * Функция преобразования сериализованного массива\r\n    * функция принимает сериализованый двухмерный массив данных\r\n    * производит его преобразования из двухмерного массива\r\n    * в одномерный и возвращает полученный массив\r\n    */\r\n    function objectifyFormData(formArray) {//преобразование массива\r\n\r\n        let returnArray = {};\r\n        for (let i = 0; i < formArray.length; i++) {\r\n            returnArray[formArray[i]['name']] = formArray[i]['value'];\r\n        }\r\n        return returnArray;\r\n    }\r\n});"]}