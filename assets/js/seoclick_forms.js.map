{"version":3,"sources":["../../sources/js/seoclick_forms.js"],"names":["jQuery","document","ready","$","inputs","sitePattern","phonePattern","emailPattern","forms","default_site_tooltip_text","default_email_tooltip_text","default_phone_tooltip_text","each","index","form","find","setEvents","on","sendData","checkInputPatterns","input","def_pattern","def_tooltip_text","pattern","attr","tooltip","data","response","undefined","command","after","next","hide","show","css","outerHeight","animate","opacity","input_obj","data_type","validation","checkPasteText","checkPressedKey","check","checkPattern","val","removeClass","event","originalEvent","clipboardData","getData","getPattern","test","preventDefault","e","ctrlKey","altKey","metaKey","chr","getChar","code","which","keyCode","String","fromCharCode","charCode","inputData","value","RegExp","addClass","formData","FormData","capchaResponse","request","formContainer","closest","messageBox","files_data","files","checkFiles","valid","html","message","i","length","append","serializeArray","key","name","hasClass","scrollTop","offset","top","ajax","type","processData","contentType","success","respond","error","jqXHR","textStatus","grecaptcha","reset","responce","file","file_size","size","max_size","Math","round"],"mappings":"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","file":"seoclick_forms.js","sourcesContent":["jQuery(document).ready(function ($) {\r\n\r\n    let inputs,\r\n        sitePattern = \"^[\\\\w \\\\.]+[\\\\.]{1}[\\\\D]{2,4}$\",\r\n        phonePattern = \"^[\\\\d \\\\+]{1,5}[\\\\( \\\\d \\\\) \\\\s]{1,10}[-?\\\\d \\\\s]+$\",\r\n        emailPattern = \"^[\\\\w \\\\.]+[@]{1}[\\\\w]+[\\\\.]{1}[\\\\D]{2,4}$\",\r\n        forms = $(\".form-validate\"),\r\n        default_site_tooltip_text = \"Адрес должен быть в формате site.domain\",\r\n        default_email_tooltip_text = \"Email должен быть в формате mailbox@mail.domain\",\r\n        default_phone_tooltip_text = \"Телефон должен быть в формате +код страны(код оператора)номер телефона. Например +375(33)123-45-67\";\r\n\r\n    $.each(forms, function (index, form) {\r\n\r\n        //получаем валиируемые поля формы\r\n        inputs = $(form).find(\".validate\");\r\n\r\n        //вызываем функцию установки обработчиков на поля формы\r\n        setEvents(inputs);\r\n        //вешам обработчик отправки формы\r\n        $(form).on(\"submit\", sendData);\r\n    });\r\n\r\n    /*\r\n    * Функция проверяет атрибуты pattern и data-tooltip\r\n    * и в случае их отсутсвия присваивает им значения\r\n    * по умолчанию при их наличии и возвращает true\r\n    * иначе false\r\n    * */\r\n    function checkInputPatterns(input, def_pattern, def_tooltip_text) {\r\n\r\n        let pattern = input.attr(\"pattern\"),\r\n            tooltip = input.data(\"tooltip\"),\r\n            response = {pattern: false, tooltip: false};\r\n\r\n        if (pattern === undefined) {\r\n            if (def_pattern !== undefined) {\r\n                input.attr(\"pattern\", def_pattern);\r\n                response.pattern = true;\r\n            } else {\r\n                response.pattern = false;\r\n            }\r\n        } else {\r\n            response.pattern = true;\r\n        }\r\n\r\n        if (tooltip === undefined) {\r\n            if (def_tooltip_text !== undefined) {\r\n                input.data(\"tooltip\", def_tooltip_text);\r\n                response.tooltip = true;\r\n            } else {\r\n                response.tooltip = false;\r\n            }\r\n        } else {\r\n            response.tooltip = true;\r\n        }\r\n\r\n        return response;\r\n    }\r\n\r\n    /*\r\n    * Функция управления подсказками\r\n    * */\r\n    function tooltip(input, command) {\r\n\r\n        switch (command) {\r\n            case 'create':\r\n                input.after(\"<div class='invalid-tooltip'><div>\" + input.data(\"tooltip\") + \"</div></div>\");\r\n                input.next().hide();\r\n                break;\r\n            case 'show':\r\n                input.next().show();\r\n                input.next().css(\"top\", input.outerHeight(true) + 8);\r\n                input.next().animate({\r\n                    opacity: 1\r\n                }, 300, () => {\r\n                    input.next().show();\r\n                });\r\n                break;\r\n            case 'hide':\r\n                input.next().animate({\r\n                    opacity: 0\r\n                }, 300, () => {\r\n                    input.next().hide();\r\n                });\r\n                break;\r\n        }\r\n    }\r\n\r\n    //функция установки обработчиков полей формы\r\n    function setEvents(inputs) {\r\n\r\n        $.each(inputs, function (index, input) {\r\n\r\n            let input_obj = $(input),\r\n                data_type = input_obj.attr(\"data-validate\"),\r\n                validation;\r\n\r\n            //устанавливвваем шаблоны для полей формы\r\n            switch (data_type) {\r\n                case \"site\":\r\n                    validation = checkInputPatterns(input_obj, sitePattern, default_site_tooltip_text);\r\n                    break;\r\n                case \"email\":\r\n                    validation = checkInputPatterns(input_obj, emailPattern, default_email_tooltip_text);\r\n                    break;\r\n                case \"phone\":\r\n                    validation = checkInputPatterns(input_obj, phonePattern, default_phone_tooltip_text);\r\n                    input_obj.on(\"paste\", checkPasteText);\r\n                    input_obj.on(\"keypress\", checkPressedKey);\r\n                    break;\r\n                default:\r\n                    validation = checkInputPatterns(input_obj);\r\n                    if (!validation.tooltip && !validation.pattern) return true;\r\n            }\r\n            if (validation.tooltip) {\r\n                tooltip(input_obj, 'create');\r\n                input_obj.on(\"mouseenter\", function () {\r\n                    tooltip(input_obj, 'show');\r\n                });\r\n                input_obj.on(\"focusout mouseleave\", function () {\r\n\r\n                    tooltip(input_obj, 'hide');\r\n                });\r\n            }\r\n            //устанавливаем обработчик на проверку вводимых данных\r\n            if (validation.pattern) {\r\n                input_obj.on(\"change keyup\", function () {\r\n\r\n                    let check = checkPattern($(this));\r\n\r\n                    if (validation.tooltip) {\r\n                        if (!check) {\r\n                            tooltip(input_obj, 'show');\r\n                        } else {\r\n                            tooltip(input_obj, 'hide');\r\n                        }\r\n                    }\r\n                });\r\n                input_obj.on(\"focusout mouseleave\", function () {\r\n\r\n                    if (input_obj.val() === '') {\r\n                        input_obj.removeClass('invalid');\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    //функция проверки вставленные данные в поле формы по шаблону\r\n    function checkPasteText(event) {\r\n        let pattern,\r\n            data = event.originalEvent.clipboardData.getData('text/plain');\r\n\r\n        pattern = getPattern($(this));\r\n\r\n        //проверка данных по шаблону\r\n        if (!pattern.test(data)) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    /*\r\n    * функция проверки нажатой клавиши\r\n    * Функция возвращет false на все клавиши,\r\n    * кроме цифр, знаков + - ( ) и пробелов\r\n    */\r\n    function checkPressedKey(event) {\r\n\r\n        let e = event;\r\n\r\n        if (e.ctrlKey || e.altKey || e.metaKey) {\r\n            return;\r\n        }\r\n\r\n        let chr = getChar(e);\r\n\r\n        // с null надо осторожно в неравенствах, т.к. например null >= '0' => true!\r\n        // на всякий случай лучше вынести проверку chr = null отдельно\r\n        if (chr === null) {\r\n            return;\r\n        }\r\n\r\n        if (chr < '0' || chr > '9') {\r\n            if (chr !== \"+\" && chr !== \"-\" && chr !== \"(\" && chr !== \")\" && chr !== \" \") {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    //функция возвращает код символа\r\n    function getChar(event) {\r\n\r\n        if (event.code === \"Space\" || event.code === \"Equal\" || event.code === \"Digit9\" || event.code === \"Digit0\") {\r\n            return 0;\r\n        }\r\n        if (event.which === null) { // IE\r\n            if (event.keyCode < 32) return null; // спец. символ\r\n            return String.fromCharCode(event.keyCode)\r\n        }\r\n\r\n        if (event.which !== 0 && event.charCode !== 0) { // все кроме IE\r\n            if (event.which < 32) return null; // спец. символ\r\n            return String.fromCharCode(event.which); // остальные\r\n        }\r\n\r\n        return null; // спец. символ\r\n    }\r\n\r\n    /*\r\n    * Функция проверки введенных данных по шаблону\r\n    * возвращает false если проверка не пройдена\r\n    */\r\n    function checkPattern(inputData) {\r\n\r\n        let value = inputData.val(), pattern;\r\n\r\n        pattern = new RegExp(inputData.attr(\"pattern\"));\r\n\r\n        //проверка данных по шаблону\r\n        if (!pattern.test(value)) {\r\n            inputData.addClass(\"invalid\");\r\n            return false;\r\n        } else {\r\n            inputData.removeClass(\"invalid\");\r\n            return true;\r\n        }\r\n    }\r\n\r\n    //функция отправки данных на сервер\r\n    function sendData(event) {\r\n\r\n        event.preventDefault();\r\n\r\n        let formData = new FormData(), form = $(this), capchaResponse, request, data,\r\n            formContainer = form.closest(\".seoclick-forms\"),\r\n            messageBox = formContainer.find(\".message-container\"),\r\n            files_data = form.find('.file-input')[0];\r\n\r\n        messageBox.addClass(\"active\");\r\n\r\n        if(files_data !== undefined){\r\n            files_data = files_data.files;\r\n\r\n            let check = checkFiles(files_data, form);\r\n\r\n            if(!check.valid){\r\n                messageBox.html(check.message);\r\n                return 0;\r\n            }\r\n            for(let i = 0; i < files_data.length; i++){\r\n                formData.append(\"file_\"+i, files_data[i]);\r\n            }\r\n        }\r\n\r\n        data = form.serializeArray();\r\n        $.each(data,function(key,input){\r\n            formData.append(input.name,input.value);\r\n        });\r\n\r\n        //Добавляем параметры запроса\r\n        formData.append('option', 'com_ajax');\r\n        formData.append('module', 'seoclick_forms');\r\n        formData.append('format', 'json');\r\n\r\n        if ($(formContainer).hasClass(\"seoclick-forms-popup-wrap\")) {\r\n            $(formContainer).find(\".container\").animate({\r\n                scrollTop: 0\r\n            }, 300);\r\n        } else {\r\n            $('html, body').animate({\r\n                scrollTop: formContainer.offset().top - 200\r\n            }, 300);\r\n        }\r\n\r\n        capchaResponse = form.find(\".g-recaptcha-response\").val();\r\n        if (capchaResponse === \"\") {\r\n           messageBox.html(\"Не пройдена проверка 'Я не робот'\");\r\n           return false;\r\n        }\r\n\r\n        messageBox.html(\"Отправка...\");\r\n\r\n        $.ajax({\r\n            type: 'POST',\r\n            data: formData,\r\n            processData: false,\r\n            contentType: false,\r\n\r\n            success: function (respond) {\r\n\r\n                if(respond.message !== null){\r\n                    messageBox.html(respond.message);\r\n                }else{\r\n                    messageBox.html(respond.data);\r\n                }\r\n            },\r\n            error: function (jqXHR, textStatus) {\r\n                messageBox.html('Ошибка AJAX запроса: ' + textStatus);\r\n            }\r\n        });\r\n\r\n        grecaptcha.reset();\r\n        return true;\r\n    }\r\n    function checkFiles(files, form){\r\n\r\n\r\n        let  responce = {message:\"\",valid: true};\r\n\r\n        $.each(files, function(index, file){\r\n\r\n            let file_size = file.size / 1000, max_size = form.find(\".file-input\").data(\"size\");\r\n\r\n            if(file_size > max_size){\r\n\r\n                responce.message = \"Размер файла \" + file.name + \" превышает допустимый размер в \" + max_size + \" кб. Его размер \" +\r\n\r\n                    Math.round(file_size) + \" кб.\";\r\n                responce.valid = false;\r\n\r\n                return responce;\r\n            }\r\n        });\r\n\r\n        return responce;\r\n    }\r\n});"]}